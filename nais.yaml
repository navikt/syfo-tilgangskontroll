# ref https://raw.githubusercontent.com/nais/naisd/master/nais_example.yaml
name: syfo-tilgangskontroll
image: "repo.adeo.no:5443/syfo-tilgangskontroll"
team: teamsykefravr
replicas:
  min: 2
  max: 4
  cpuThresholdPercentage: 50
port: 8080
healthcheck:
  liveness:
    path: /syfo-tilgangskontroll/internal/isAlive
    initialDelaySeconds: 30
    timeout: 1
    periodSeconds: 10
    failureThreshold: 3
  readiness:
    path: /syfo-tilgangskontroll/internal/isReady
    initialDelaySeconds: 60
    timeout: 1
prometheus:
  enabled: true
  path: /syfo-tilgangskontroll/internal/prometheus
resources:
  limits:
    cpu: 3000m
    memory: 1024Mi
  requests:
    cpu: 500m
    memory: 512Mi
fasitResources:
  used:
  - alias: srvsyfo-tilgangskontroll
    resourceType: credential
  - alias: appdynamics
    resourceType: applicationproperties
  - alias: loadbalancer:syfo-tilgangskontroll
    resourceType: loadbalancerconfig
  - alias: securityTokenService
    resourceType: baseUrl
  - alias: virksomhet:EgenAnsatt_v1
    resourceType: webserviceendpoint
  - alias: virksomhet:OrganisasjonRessursEnhet_v1
    resourceType: webserviceendpoint
  - alias: virksomhet:OrganisasjonEnhet_v2
    resourceType: webserviceendpoint
  - alias: virksomhet:Person_v3
    resourceType: webserviceendpoint
  - alias: isso-host
    resourceType: baseurl
  - alias: isso-jwks
    resourceType: baseurl
  - alias: isso-issuer
    resourceType: baseurl
  - alias: isso.isalive
    resourceType: baseurl
  - alias: isso-rp-user
    resourceType: credential
  - alias: veilarblogin.redirect-url
    resourceType: restservice
  - alias: ldap
    resourceType: ldap
  - alias: opam_oidc_discovery
    resourceType: baseurl
    propertyMap:
      url: NO_NAV_SECURITY_OIDC_ISSUER_INTERN_DISCOVERYURL
  exposed:
  - alias: tilgangskontrollapi
    resourceType: restservice
    path: /syfo-tilgangskontroll/api/tilgang
